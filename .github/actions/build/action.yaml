name: Build App
description: Build files and output path to dist

inputs:
  MODE:
    description: Build mode
    required: false
    default: production
  MESSAGE:
    description: Message
    required: true

runs:
  using: 'composite'
  steps:
    - name: Checkout
      uses: actions/checkout@v2
    - name: Use Node.js
      uses: actions/setup-node@v1
      with:
        node-version: '16.x'
    - name: Build frontend
      shell: bash
      env:
        VITE_MESSAGE: ${{ inputs.MESSAGE }}
      run: |
        cd ${{ github.workspace }}
        yarn install
        yarn build --mode ${{ inputs.MODE }}
        echo dist here ${{ github.workspace }}
